ETL-STOCKS-PIPELINE
![Automatis√© avec Task Scheduler](https://img.shields.ioshields.io/badge/)
PROJET REALISER AVEC CLAUDE 4.0 SONNET

Ce projet est un pipeline ETL automatis√© qui extrait quotidiennement les donn√©es boursi√®res de 60 tickers mondiaux via Yahoo Finance, les transforme avec Python/pandas et les charge dans une base de donn√©es MySQL structur√©e.

Le but est de fournir une base de donn√©es √† jour pour l'analyse BI, la visualisation Power BI et la prise de d√©cision business bas√©e sur des donn√©es financi√®res mondiales.

üéØ Fonctionnalit√©s
Pipeline ETL Complet
‚úÖ Extraction automatis√©e de 60 tickers mondiaux (indices, finance, industrie, tech, √©nergie)

‚úÖ Transformation et nettoyage des donn√©es avec pandas

‚úÖ Chargement s√©curis√© dans MySQL avec gestion d'erreurs

‚úÖ Logging professionnel pour tra√ßabilit√© et debugging

Automatisation & S√©curit√©
‚úÖ Planification automatique avec le Planificateur de t√¢ches Windows

‚úÖ S√©curisation des identifiants via fichier .env

‚úÖ Gestion d'erreurs robuste avec retry automatique

‚úÖ Extensibilit√© facile (ajout de nouveaux tickers)

Analyse BI Ready
‚úÖ Structure optimis√©e pour Power BI, SQL et DAX

‚úÖ Classification sectorielle (Finance, Tech, √ânergie, Industrie, Indices)

‚úÖ Donn√©es g√©ographiques (USA, Europe, Asie, Canada)

‚úÖ KPIs pr√©-calcul√©s (variations, volumes, dates de mise √† jour)

üìà Donn√©es Couvertes
60 Tickers R√©partis en 5 Cat√©gories
Secteur	Nombre	Exemples
Indices Mondiaux	12	S&P 500 (^GSPC), NASDAQ (^IXIC), CAC 40 (^FCHI), Nikkei (^N225)
Finance	12	JPMorgan (JPM), Visa (V), HSBC (HSBC), Mastercard (MA)
Industrie	12	Boeing (BA), Caterpillar (CAT), Airbus (AIR.PA), Toyota (TM)
Technologie	12	Apple (AAPL), Microsoft (MSFT), Nvidia (NVDA), Google (GOOGL)
√ânergie	12	ExxonMobil (XOM), Shell (SHEL), TotalEnergies (TOT.PA), Tesla (TSLA)
Couverture G√©ographique Mondiale
üá∫üá∏ √âtats-Unis - üá™üá∫ Europe - üá¨üáß Royaume-Uni - üá®üá≥ Chine/Hong Kong - üáØüáµ Japon - üá®üá¶ Canada - üá¶üá∫ Australie - üáÆüá≥ Inde

üõ†Ô∏è Pr√©requis
Python 3.8+

MySQL Server 8.0+

Windows (pour l'automatisation avec Task Scheduler)

Connexion Internet (pour Yahoo Finance API)

Power BI Desktop (optionnel, pour l'analyse)

‚ö° Installation
1. Cloner le d√©p√¥t
bash
git clone https://github.com/Chris03-be/ETL-STOCKS-PIPELINE.git
cd ETL-STOCKS-PIPELINE
2. Cr√©er et activer l'environnement virtuel
bash
python -m venv .venv
.venv\Scripts\activate   # Windows
# ou
source .venv/bin/activate   # Mac/Linux
3. Installer les d√©pendances
bash
pip install -r requirements.txt
4. Configurer la base MySQL
sql
-- Cr√©er la base de donn√©es
CREATE DATABASE IF NOT EXISTS stock_data;

-- Cr√©er un utilisateur d√©di√© (optionnel)
CREATE USER IF NOT EXISTS 'etl_user'@'localhost' IDENTIFIED BY 'mot_de_passe_securise';
GRANT ALL PRIVILEGES ON stock_data.* TO 'etl_user'@'localhost';
FLUSH PRIVILEGES;
5. Configurer le fichier .env
bash
# Copier le fichier d'exemple
cp .env.example .env
Puis remplir avec vos identifiants MySQL :

text
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=etl_user
MYSQL_PASSWORD=votre_mot_de_passe
MYSQL_DATABASE=stock_data
üöÄ Utilisation
Ex√©cution Manuelle
bash
python etl_stocks.py
Automatisation (Planificateur de t√¢ches Windows)
Utiliser le fichier batch run_etl.bat :

text
@echo off
cd "C:\chemin\vers\ETL-STOCKS-PIPELINE"
.venv\Scripts\activate
python etl_stocks.py
Configurer le Planificateur de t√¢ches :

Ouvrir "Planificateur de t√¢ches Windows"

Cr√©er une t√¢che de base

Programmer l'ex√©cution (ex: quotidienne √† 8h00)

Action : D√©marrer le programme run_etl.bat

üìä Utilisation pour l'Analyse BI (Power BI, SQL, DAX)
Ce projet ETL pr√©pare une base de donn√©es MySQL structur√©e et √† jour, id√©ale pour l'analyse avanc√©e et la cr√©ation de dashboards.

1. Connexion √† la Base MySQL
Ouvre Power BI Desktop ou ton outil d'analyse pr√©f√©r√©

Connecte-toi √† la base MySQL cr√©√©e par le pipeline

S√©lectionne la table historical_prices

2. Pr√©paration des Donn√©es avec SQL
Utilise des requ√™tes SQL pour filtrer, agr√©ger ou transformer les donn√©es avant import dans Power BI.

Exemple - Performance par secteur :

sql
SELECT 
    sector,
    ticker,
    date,
    close,
    (close - open) / open * 100 AS daily_variation
FROM historical_prices
WHERE date >= DATE_SUB(CURDATE(), INTERVAL 30 DAY)
ORDER BY sector, date DESC;
Exemple - Top performers :

sql
SELECT 
    ticker,
    sector,
    AVG((close - open) / open * 100) as avg_daily_return,
    STDDEV((close - open) / open * 100) as volatility
FROM historical_prices 
WHERE date >= DATE_SUB(CURDATE(), INTERVAL 90 DAY)
GROUP BY ticker, sector
ORDER BY avg_daily_return DESC;
3. Cr√©ation de Mesures et KPIs avec DAX (dans Power BI)
Dans Power BI, cr√©e des mesures dynamiques pour enrichir tes analyses.

Exemples de mesures DAX :

text
// Variation journali√®re
Variation Journali√®re = 
DIVIDE([Close] - [Open], [Open], 0) * 100

// Moyenne mobile 30 jours
Moyenne Mobile 30J = 
CALCULATE(
    AVERAGE(historical_prices[close]),
    DATESINPERIOD(historical_prices[date], LASTDATE(historical_prices[date]), -30, DAY)
)

// Volume moyen par secteur
Volume Moyen Secteur = 
CALCULATE(
    AVERAGE(historical_prices[volume]),
    ALLEXCEPT(historical_prices, historical_prices[sector])
)

// Performance YTD
Performance YTD = 
VAR FirstPrice = CALCULATE(FIRSTNONBLANK(historical_prices[close], 1), DATESYTD(historical_prices[date]))
VAR LastPrice = CALCULATE(LASTNONBLANK(historical_prices[close], 1), DATESYTD(historical_prices[date]))
RETURN DIVIDE(LastPrice - FirstPrice, FirstPrice, 0) * 100
4. Construction du Dashboard
Visuels recommand√©s : Line charts (tendances), Bar charts (comparaisons sectorielles), Cards (KPIs), Tables (d√©tails)

Filtres dynamiques : Date, Secteur, Type (action/indice), Ticker

Storytelling : Focus sur les insights actionnables et la clart√© des tendances

5. Bonnes Pratiques BI
‚úÖ Rafra√Æchissement automatique : Configure Power BI Service pour synchroniser avec MySQL

‚úÖ Mod√®le en √©toile : Utilise les colonnes sector, type, date comme dimensions

‚úÖ Performance : Cr√©e des index MySQL sur les colonnes fr√©quemment filtr√©es

‚úÖ Gouvernance : Ne modifie pas le pipeline si tu veux garder une base stable

üîß Ajouter d'Autres Entreprises (Tickers)
Pour suivre de nouvelles actions, ajoutez simplement leur ticker dans le dictionnaire TICKER_MAPPING du script etl_stocks.py :

python
TICKER_MAPPING = {
    # Ajouter de nouveaux tickers ici
    'NFLX': {'sector': 'Technologie', 'type': 'stock'},
    'DIS': {'sector': 'Industrie', 'type': 'stock'},
    # ...
}
Le script d√©tectera automatiquement les nouveaux tickers et les int√©grera au pipeline.

üìÅ Structure du Projet
text
/ETL-STOCKS-PIPELINE/
‚îú‚îÄ‚îÄ etl_stocks.py           # Script principal du pipeline ETL
‚îú‚îÄ‚îÄ .env                    # Configuration MySQL (√† cr√©er)
‚îú‚îÄ‚îÄ .env.example           # Exemple de configuration
‚îú‚îÄ‚îÄ .gitignore             # Fichiers √† ignorer par Git
‚îú‚îÄ‚îÄ requirements.txt       # D√©pendances Python
‚îú‚îÄ‚îÄ run_etl.bat           # Script batch pour Windows
‚îú‚îÄ‚îÄ pipeline.log          # Logs d'ex√©cution (g√©n√©r√© automatiquement)
‚îú‚îÄ‚îÄ README.md             # Documentation du projet
‚îî‚îÄ‚îÄ .venv/                # Environnement virtuel Python
üõ†Ô∏è Technologies Utilis√©es
Cat√©gorie	Technologies
Backend	Python 3.8+, pandas, yfinance, PyMySQL
Base de Donn√©es	MySQL 8.0+
S√©curit√©	python-dotenv
Automatisation	Windows Task Scheduler
Analyse BI	Power BI, SQL, DAX
Monitoring	Logging Python
üìä Structure des Donn√©es MySQL
Table : historical_prices
Colonne	Type	Description
date	DATE	Date de la cotation (PK)
ticker	VARCHAR(20)	Symbole du ticker (PK)
open	FLOAT	Prix d'ouverture
high	FLOAT	Prix le plus haut
low	FLOAT	Prix le plus bas
close	FLOAT	Prix de cl√¥ture
volume	BIGINT	Volume d'√©change
adj_close	FLOAT	Prix ajust√© (dividendes/splits)
sector	VARCHAR(50)	Secteur (Finance, Technologie, etc.)
type	VARCHAR(20)	Type (stock, index)
last_updated	DATETIME	Date de derni√®re mise √† jour
üö® D√©pannage
Erreurs Communes
Erreur	Solution
NameError: 'get_rolling_year_dates' not defined	V√©rifier que toutes les fonctions sont d√©finies dans le script
Unknown column 'sector'	Ex√©cuter ALTER TABLE historical_prices ADD COLUMN sector VARCHAR(50)
Connection refused	V√©rifier que MySQL est d√©marr√©
Timeout yfinance	Relancer le script, v√©rifier la connexion Internet
Logs et Monitoring
bash
# V√©rifier les derni√®res ex√©cutions
tail -f pipeline.log

# Compter les erreurs r√©centes
grep "ERROR" pipeline.log | tail -10
ü§ù Contribution
Fork le projet

Cr√©er une branche feature (git checkout -b feature/nouvelle-fonctionnalite)

Commit les changements (git commit -am 'Ajout nouvelle fonctionnalit√©')

Push vers la branche (git push origin feature/nouvelle-fonctionnalite)

Cr√©er une Pull Request

üë®‚Äçüíª Auteur
Chris Beda

üêô GitHub : Chris03-be

üíº etudiant en Business Intelligence et analyse de donn√©es

pipelines ETL et visualisation Power BI

üìÑ Licence
MIT License - Voir le fichier LICENSE pour plus de d√©tails.

‚≠ê Si ce projet vous a √©t√© utile pour vos analyses BI, n'h√©sitez pas √† lui donner une √©toile !

